# Chapter [2]: .NET 리소스 관리

## item[11]: .NET 리소스 관리에 대해

- .NET 환경에서는 리소스를 관리하는 가비지 콜렉터가 존재하여 메모리 관리를 직접 하지 않아도되지만 비관리 리소스는 여전히 관리해야 한다.
- 파이널라이저는 가비지 컬렉터가 객체를 회수할 때 자동으로 호출되므로 예측할 수 없고, 호출 시점도 불확실하다.
- 반면, IDisposable 인터페이스의 Dispose 메서드는 개발자가 직접 호출할 수 있어, 리소스를 필요한 즉시 명확하게 해제할 수 있다. 이로 인해 메모리 사용 효율이 높아지고, 애플리케이션의 성능이 향상됨.
- 비관리 메모리를 관리할 때 finalize는 성능에 영향을 끼치므로 IDisposable를 사용하여 관리하는 것이 좋다.

## item[12]: 할당 구문보다 멤버 초기화 구문이 좋다

- 멤버 변수를 선언할 때 바로 초기화하면 코드가 더 읽기 쉽고 이해하기 쉽다.
- 초기화 로직이 한 곳에 모여 있어 기본값이 무엇인지 명확하게 알 수 있다.
- 멤버를 선언 시점에 초기화하면 모든 생성자에서 초기화하는 것을 잊어버릴 위험이 줄어듬.
- 인라인 초기화를 사용하면 어떤 생성자가 사용되든 멤버 변수가 항상 알려진 상태로 설정된다.
- 여러 생성자 간에 일관된 방법으로 멤버 변수를 처리할 수 있다.

## item[13]: 정적클래스 멤버를 올바르게 초기화하라

- 정적 필드 초기화: 정적 필드는 클래스가 로드될 때 한 번만 초기화되므로, 초기화 코드는 스레드 안전하고 성능 저하를 최소화하는 방식으로 작성.
- System.Lazy<T> 사용: System.Lazy<T>는 스레드 안전하게 객체를 지연 초기화하는 메커니즘을 제공한다. 이를 통해 개발자는 초기화 복잡성을 관리하고, 필요할 때에만 리소스를 할당할 수 있음.

## item[14]: 초기화 코드가 중복되는 것을 최소화하라

- 정적 변수의 저장 공간을 0으로 초기화
- 정젹 변수에 대한 초기화 구문 수행
- 베이스 클래스의 정적 생성자 수행
- 정적 생성자 수행
- 인스턴스 변수의 저장 공간을 0으로 초기화
- 인스턴스 변수에 대한 초기화 구문 수행
- 적절한 베이스 클래스의 인스턴스 생성자 수행
- 인스턴스 생성자 수행
  - 추가 인스턴스 생성시에는 5번 부터 수행한다.
  - 컴파일러가 생성자 내에 중복된 맴버 초기화 코드를 생성하지 않도록 6, 7 단계는 최적화 되어 있다.

## item[15]: 불필요한 객체를 만들지 말라

- 불필요한 객체를 만들어서 GC를 괴롭히지 말자
- 자주 사용되는 지역변수를 멤버 변수로 변경
- DI(dependency injection)를 활용해 자주 사용되는 객체를 재활용
- 문자열 보간 사용
